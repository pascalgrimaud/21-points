os:
  - linux
services:
  - docker
language: java
node_js:
  - "4.2.1"
jdk:
  - oraclejdk8
install:
  - java -version
  - ./gradlew --version
  - npm install -g bower
  - npm install -g grunt-cli
  - npm install
  - ./gradlew assemble
script:
  - docker-compose up -d
  - sleep 15s
  - ./gradlew check
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - ./gradlew bootRun &
  - bootPid=$!
  - sleep 120s
  - grunt itest
